(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["session"],{"13d9":function(t,e){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],i=0;i<t.rangeCount;i++)n.push(t.getRangeAt(i));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach((function(e){t.addRange(e)})),e&&e.focus()}}},9734:function(t,e,n){},ea4c:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"card",staticStyle:{"padding-bottom":"10px"},attrs:{color:"#385F73",dark:""}},[n("v-card-title",{staticClass:"headline"},[t._v(" Session: "),n("code",{staticStyle:{"margin-left":"0.5em"}},[t._v(t._s(t.sessionID))]),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({class:{green:t.copied},staticStyle:{transition:"0.25s",margin:"0.5em"},on:{click:function(e){return t.copyID()}}},"v-btn",o,!1),i),[t.copied?n("span",[n("v-icon",[t._v("mdi-check")]),t._v(" Copied!")],1):n("span",[n("v-icon",[t._v("mdi-link")]),t._v(" Copy")],1)])]}}])},[n("span",[t._v("Click to copy to clipboard")])])],1),n("v-card-subtitle",[t._v("Joined as "+t._s(t.displayName))]),n("v-card-subtitle",[t._v("Click the microphone icon to start recording.")]),n("v-card-actions",{staticClass:"justify-center"},[n("v-btn",{staticClass:"pink justify-center micbutton",attrs:{fab:"",dark:"","x-large":"",color:"pink"},on:{click:function(e){t.started?t.stopRecognition():t.startRecognition()}}},[t.started?n("v-icon",[t._v(" mdi-microphone-off ")]):n("v-icon",[t._v(" mdi-microphone ")])],1)],1),t.started?n("span",[n("v-card-subtitle",{staticClass:"text-center",staticStyle:{color:"pink"}},[t._v(" Speech recognition is running! ")])],1):t._e(),n("v-card-actions",{staticClass:"justify-end"},[t.isHost?n("v-btn",{staticClass:"pink justify-center",attrs:{dark:"","x-large":"",color:"pink"},on:{click:function(e){return t.endRecording()}}},[t._v(" End the Session ")]):t._e()],1),n("v-card-subtitle",{staticStyle:{"padding-top":"0px","padding-bottom":"0px"}},t._l(t.recordedSpeechReverse,(function(e,i){return n("p",{key:i,class:{"text-center":e.hot},style:{color:e.hot?"orange":void 0}},[t._v(" "+t._s(e.text)+" ")])})),0)],1)},o=[],s=(n("99af"),n("a630"),n("a15b"),n("d81d"),n("fb6a"),n("b0c0"),n("ac1f"),n("3ca3"),n("5319"),n("498a"),n("96cf"),n("1da1")),a=n("bc3a"),r=n.n(a),c=n("f904"),u=n.n(c),d=n("a3c4"),h="https://autoscriber.sagg.in:8000",l=new(window.SpeechRecognition||window.webkitSpeechRecognition);l.continuous=!1,l.interimResults=!0,l.onstart=function(){console.debug("Recognition started")},l.onaudioend=function(){return l.stop()},l.lang="en-US",window.addEventListener("beforeunload",l.abort,!1);var f={data:function(){return{recordedSpeech:[{hot:!0}],recognition:l,started:!1,copied:!1,displayName:"",socket:null,userID:null,ended:!1}},computed:{recordedSpeechReverse:function(){return this.recordedSpeech.slice().reverse()}},methods:{startRecognition:function(){var t=this;this.recognition.onresult=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){var i,o,s,a,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.results[n.results.length-1],o=Array.from(i).map((function(t){return t.transcript})).join(" "),s=Math.max(t.recordedSpeech.length-1,0),t.$set(t.recordedSpeech[s],"text",o),!i.isFinal){e.next=14;break}return console.debug(n),t.recordedSpeech[s].hot=!1,t.recordedSpeech.push({hot:!0}),a={meeting_id:t.sessionID,uid:t.userID,name:t.displayName},c={user:a,dialogue:t.recordedSpeech[s].text},e.next=12,r.a.post("".concat(h,"/add"),c);case 12:u=e.sent,t.userID||(t.userID=u.data);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.onend=function(){l.start()},this.recognition.start(),this.started=!0},stopRecognition:function(){this.recognition.onend=void 0,this.recognition.stop(),this.started=!1},endRecording:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=!t.ended,e.t0){e.next=5;break}return e.next=4,t.$dialog.confirm({title:"End Session",text:"Are you sure you want to end the session for all participants?"});case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=16;break}if(t.started&&t.stopRecognition(),t.ended){e.next=10;break}return e.next=10,r.a.post("".concat(h,"/end"),{meeting_id:t.sessionID,uid:t.userID,name:t.name});case 10:return e.next=12,t.$dialog.info({title:"Session Ended",text:"The session was ended! Your notes will be available for download shortly."});case 12:return t.ended=!0,e.abrupt("return",!0);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})))()},copyID:function(){var t=this;u()("".concat(window.location.origin,"#/session/").concat(this.sessionID)),clearTimeout(this.copied),this.copied=setTimeout((function(){t.copied=!1}),1e3)},connectWS:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isHost?t.socket=new WebSocket("".concat(h.replace("https","wss"),"/hostWS/").concat(t.sessionID,"/").concat(t.userID)):t.socket=new WebSocket("".concat(h.replace("https","wss"),"/joinWS/").concat(t.sessionID,"/").concat(t.userID)),t.socket.addEventListener("message",function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=JSON.parse(n.data),"end_meeting"!=i.event){e.next=6;break}t.ended=!0,t.endRecording(),e.next=11;break;case 6:if("done_processing"!=i.event){e.next=11;break}return e.next=9,t.$dialog.confirm({title:"Processing finished!",text:"You can now download the notes as a text file.",actions:{false:"Close",true:{text:"Download",color:"primary"}}});case 9:if(!e.sent){e.next=11;break}t.$router.push({name:"Join",params:{downloadID:t.sessionID}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.userID=t.uid,e.next=3,r.a.post("".concat(h,"/is_valid_meeting?meeting_id=").concat(t.sessionID));case 3:if(e.sent.data){e.next=8;break}return e.next=6,t.$dialog.error({title:"Invalid Session",text:"The session you specified doesn't exist."});case 6:return t.ended=!0,e.abrupt("return");case 8:if(e.t1=t.name,e.t1){e.next=13;break}return e.next=12,Object(d["a"])(t.$dialog,"name");case 12:e.t1=e.sent;case 13:if(e.t0=e.t1,e.t0){e.next=16;break}e.t0="Anonymous";case 16:if(n=e.t0.trim(),n){e.next=19;break}return e.abrupt("return");case 19:if(t.displayName=n,t.isHost){e.next=24;break}return e.next=23,r.a.post("".concat(h,"/join"),{name:n,meeting_id:t.sessionID});case 23:t.userID=e.sent.data.uid;case 24:t.connectWS();case 25:case"end":return e.stop()}}),e)})))()},props:{name:{type:String,default:null},sessionID:{type:String,required:!0},isHost:{type:Boolean,default:!1},uid:{type:String,default:""}},beforeRouteLeave:function(t,e,n){var i=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i.ended){t.next=4;break}n(!0),t.next=15;break;case 4:if(!i.isHost){t.next=11;break}return t.next=7,i.endRecording();case 7:if(!t.sent){t.next=9;break}n(!0);case 9:t.next=15;break;case 11:return t.next=13,i.$dialog.confirm({title:i.isHost?"End the Session":"Disconnect from Session",text:"Are you sure you want to ".concat(i.isHost?"end":"disconnect from"," this session?"),actions:{false:"No",true:{text:"Yes",color:"primary"}}});case 13:if(!t.sent){t.next=15;break}n(!0);case 15:case"end":return t.stop()}}),t)})))()}},p=f,g=n("2877"),m=n("6544"),v=n.n(m),b=n("8336"),w=n("b0af"),y=n("99d9"),x=n("132d"),k=(n("a9e3"),n("ade3")),S=(n("9734"),n("4ad4")),C=n("a9ad"),D=n("16b7"),O=n("b848"),R=n("75eb"),A=(n("d3b7"),n("5530")),I=n("fe6c"),_=n("21be"),T=n("58df"),L=n("80d2"),W=Object(T["a"])(_["a"],I["a"],S["a"]),j=W.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,openOnClick:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:function(){return{absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}},computed:{computedLeft:function(){var t=this.dimensions.activator,e=this.dimensions.content,n=(!1!==this.attach?t.offsetLeft:t.left)||0,i=Math.max(t.width,e.width),o=0;if(o+=this.left?n-(i-t.width):n,this.offsetX){var s=isNaN(Number(this.maxWidth))?t.width:Math.min(t.width,Number(this.maxWidth));o+=this.left?-s:t.width}return this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),o},computedTop:function(){var t=this.dimensions.activator,e=this.dimensions.content,n=0;return this.top&&(n+=t.height-e.height),!1!==this.attach?n+=t.offsetTop:n+=t.top+this.pageYOffset,this.offsetY&&(n+=this.top?-t.height:t.height),this.nudgeTop&&(n-=parseInt(this.nudgeTop)),this.nudgeBottom&&(n+=parseInt(this.nudgeBottom)),n},hasActivator:function(){return!!this.$slots.activator||!!this.$scopedSlots.activator||!!this.activator||!!this.inputActivator}},watch:{disabled:function(t){t&&this.callDeactivate()},isActive:function(t){this.disabled||(t?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount:function(){this.hasWindow="undefined"!==typeof window},methods:{absolutePosition:function(){return{offsetTop:0,offsetLeft:0,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate:function(){},calcLeft:function(t){return Object(L["f"])(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,t))},calcTop:function(){return Object(L["f"])(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow:function(t,e){var n=t+e-this.pageWidth+12;return t=(!this.left||this.right)&&n>0?Math.max(t-n,0):Math.max(t,12),t+this.getOffsetLeft()},calcYOverflow:function(t){var e=this.getInnerHeight(),n=this.pageYOffset+e,i=this.dimensions.activator,o=this.dimensions.content.height,s=t+o,a=n<s;return a&&this.offsetOverflow&&i.top>o?t=this.pageYOffset+(i.top-o):a&&!this.allowOverflow?t=n-o-12:t<this.pageYOffset&&!this.allowOverflow&&(t=this.pageYOffset+12),t<12?12:t},callActivate:function(){this.hasWindow&&this.activate()},callDeactivate:function(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset:function(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed:function(){if(!1===this.attach){var t=this.getActivator();while(t){if("fixed"===window.getComputedStyle(t).position)return void(this.activatorFixed=!0);t=t.offsetParent}this.activatorFixed=!1}},deactivate:function(){},genActivatorListeners:function(){var t=this,e=S["a"].options.methods.genActivatorListeners.call(this),n=e.click;return e.click=function(e){t.openOnClick&&n&&n(e),t.absoluteX=e.clientX,t.absoluteY=e.clientY},e},getInnerHeight:function(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft:function(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop:function(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect:function(t){var e=t.getBoundingClientRect();return{top:Math.round(e.top),left:Math.round(e.left),bottom:Math.round(e.bottom),right:Math.round(e.right),width:Math.round(e.width),height:Math.round(e.height)}},measure:function(t){if(!t||!this.hasWindow)return null;var e=this.getRoundedBoundedClientRect(t);if(!1!==this.attach){var n=window.getComputedStyle(t);e.left=parseInt(n.marginLeft),e.top=parseInt(n.marginTop)}return e},sneakPeek:function(t){var e=this;requestAnimationFrame((function(){var n=e.$refs.content;n&&"none"===n.style.display?(n.style.display="inline-block",t(),n.style.display="none"):t()}))},startTransition:function(){var t=this;return new Promise((function(e){return requestAnimationFrame((function(){t.isContentActive=t.hasJustFocused=t.isActive,e()}))}))},updateDimensions:function(){var t=this;this.hasWindow="undefined"!==typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;var e={activator:Object(A["a"])({},this.dimensions.activator),content:Object(A["a"])({},this.dimensions.content)};if(!this.hasActivator||this.absolute)e.activator=this.absolutePosition();else{var n=this.getActivator();if(!n)return;e.activator=this.measure(n),e.activator.offsetLeft=n.offsetLeft,!1!==this.attach?e.activator.offsetTop=n.offsetTop:e.activator.offsetTop=0}this.sneakPeek((function(){t.$refs.content&&(e.content=t.measure(t.$refs.content)),t.dimensions=e}))}}}),Y=n("f2e7"),N=n("d9bd"),E=Object(T["a"])(C["a"],D["a"],O["a"],R["a"],j,Y["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,fixed:{type:Boolean,default:!0},openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:function(){return{calculatedMinWidth:0,closeDependents:!1}},computed:{calculatedLeft:function(){var t=this.dimensions,e=t.activator,n=t.content,i=!this.bottom&&!this.left&&!this.top&&!this.right,o=!1!==this.attach?e.offsetLeft:e.left,s=0;return this.top||this.bottom||i?s=o+e.width/2-n.width/2:(this.left||this.right)&&(s=o+(this.right?e.width:-n.width)+(this.right?10:-10)),this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),"".concat(this.calcXOverflow(s,this.dimensions.content.width),"px")},calculatedTop:function(){var t=this.dimensions,e=t.activator,n=t.content,i=!1!==this.attach?e.offsetTop:e.top,o=0;return this.top||this.bottom?o=i+(this.bottom?e.height:-n.height)+(this.bottom?10:-10):(this.left||this.right)&&(o=i+e.height/2-n.height/2),this.nudgeTop&&(o-=parseInt(this.nudgeTop)),this.nudgeBottom&&(o+=parseInt(this.nudgeBottom)),"".concat(this.calcYOverflow(o+this.pageYOffset),"px")},classes:function(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition:function(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY:function(){return this.top||this.bottom},offsetX:function(){return this.left||this.right},styles:function(){return{left:this.calculatedLeft,maxWidth:Object(L["f"])(this.maxWidth),minWidth:Object(L["f"])(this.minWidth),opacity:this.isActive?.9:0,top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount:function(){var t=this;this.$nextTick((function(){t.value&&t.callActivate()}))},mounted:function(){"v-slot"===Object(L["m"])(this,"activator",!0)&&Object(N["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate:function(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate:function(){this.runDelay("close")},genActivatorListeners:function(){var t=this,e=S["a"].options.methods.genActivatorListeners.call(this);return e.focus=function(e){t.getActivator(e),t.runDelay("open")},e.blur=function(e){t.getActivator(e),t.runDelay("close")},e.keydown=function(e){e.keyCode===L["p"].esc&&(t.getActivator(e),t.runDelay("close"))},e},genActivatorAttributes:function(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition:function(){var t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent:function(){var t;return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:(t={},Object(k["a"])(t,this.contentClass,!0),Object(k["a"])(t,"menuable__content__active",this.isActive),Object(k["a"])(t,"v-tooltip__content--fixed",this.activatorFixed),t),style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render:function(t){var e=this;return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((function(){return[e.genTransition()]})),this.genActivator()])}}),B=Object(g["a"])(p,i,o,!1,null,null,null);e["default"]=B.exports;v()(B,{VBtn:b["a"],VCard:w["a"],VCardActions:y["a"],VCardSubtitle:y["b"],VCardTitle:y["d"],VIcon:x["a"],VTooltip:E})},f904:function(t,e,n){"use strict";var i=n("13d9"),o={"text/plain":"Text","text/html":"Url",default:"Text"},s="Copy to clipboard: #{key}, Enter";function a(t){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,e)}function r(t,e){var n,r,c,u,d,h,l=!1;e||(e={}),n=e.debug||!1;try{c=i(),u=document.createRange(),d=document.getSelection(),h=document.createElement("span"),h.textContent=t,h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",(function(i){if(i.stopPropagation(),e.format)if(i.preventDefault(),"undefined"===typeof i.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var s=o[e.format]||o["default"];window.clipboardData.setData(s,t)}else i.clipboardData.clearData(),i.clipboardData.setData(e.format,t);e.onCopy&&(i.preventDefault(),e.onCopy(i.clipboardData))})),document.body.appendChild(h),u.selectNodeContents(h),d.addRange(u);var f=document.execCommand("copy");if(!f)throw new Error("copy command was unsuccessful");l=!0}catch(p){n&&console.error("unable to copy using execCommand: ",p),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),l=!0}catch(p){n&&console.error("unable to copy using clipboardData: ",p),n&&console.error("falling back to prompt"),r=a("message"in e?e.message:s),window.prompt(r,t)}}finally{d&&("function"==typeof d.removeRange?d.removeRange(u):d.removeAllRanges()),h&&document.body.removeChild(h),c()}return l}t.exports=r}}]);
//# sourceMappingURL=session.c53dc132.js.map